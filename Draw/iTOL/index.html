<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Draw/iTOL" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">iTOL进化树美化 | lab-protocol</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://violetiiiii.github.io/lab-protocol/Draw/iTOL/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="iTOL进化树美化 | lab-protocol"><meta data-rh="true" name="description" content="Color strip (DATASET_COLORSTRIP)"><meta data-rh="true" property="og:description" content="Color strip (DATASET_COLORSTRIP)"><link data-rh="true" rel="icon" href="/lab-protocol/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://violetiiiii.github.io/lab-protocol/Draw/iTOL/"><link data-rh="true" rel="alternate" href="https://violetiiiii.github.io/lab-protocol/Draw/iTOL/" hreflang="en"><link data-rh="true" rel="alternate" href="https://violetiiiii.github.io/lab-protocol/Draw/iTOL/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"iTOL进化树美化","item":"https://violetiiiii.github.io/lab-protocol/Draw/iTOL"}]}</script><link rel="stylesheet" href="/lab-protocol/assets/css/styles.e47bebc1.css">
<script src="/lab-protocol/assets/js/runtime~main.31b85f32.js" defer="defer"></script>
<script src="/lab-protocol/assets/js/main.d517d7fb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/lab-protocol/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lab-protocol/"><div class="navbar__logo"><img src="/lab-protocol/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/lab-protocol/img/logo.svg" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">lab-protocol</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lab-protocol/intro/">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lab-protocol/intro/">实验手册</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lab-protocol/Basic Experiments/For protein/">Basic Experiments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/lab-protocol/Draw/iTOL/">Draw</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/lab-protocol/Draw/iTOL/">iTOL进化树美化</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lab-protocol/SSG/Intro/">SSG</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/lab-protocol/protein/expression/">protein</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/lab-protocol/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Draw</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">iTOL进化树美化</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>IQ-TREE &amp; iTOL</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="color-strip-dataset_colorstrip">Color strip (DATASET_COLORSTRIP)<a href="#color-strip-dataset_colorstrip" class="hash-link" aria-label="Direct link to Color strip (DATASET_COLORSTRIP)" title="Direct link to Color strip (DATASET_COLORSTRIP)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="新建一个文件">新建一个文件<a href="#新建一个文件" class="hash-link" aria-label="Direct link to 新建一个文件" title="Direct link to 新建一个文件">​</a></h3>
<p>我建的文件叫做itol_out</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">ssh</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p /data1/guanti/ppl_work/B2_expand/itol_out</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="从系统上批量抓取分组不同库来源序列并进行美化">从系统上批量抓取分组不同库来源序列，并进行美化<a href="#从系统上批量抓取分组不同库来源序列并进行美化" class="hash-link" aria-label="Direct link to 从系统上批量抓取分组不同库来源序列，并进行美化" title="Direct link to 从系统上批量抓取分组不同库来源序列，并进行美化">​</a></h3>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">ssh</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">awk -F&#x27;\t&#x27; &#x27;BEGIN{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;DATASET_COLORSTRIP\nSEPARATOR\tTAB&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;DATASET_LABEL\tSourceDatabase&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;COLOR\t#000000\n&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;LEGEND_TITLE\tDatabase Source&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;LEGEND_SHAPES\t1\t1\t1\t1\t1&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;LEGEND_COLORS\t#9f99d1\t#86bada\t#dbaad7\t#f6beb0\t#ffe3b3&quot;; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;LEGEND_LABELS\tUniRef90\tTara\tMalaspina\tGEM\tOMD\n&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print &quot;DATA&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if($1 ~ /^UniRef90/) col=&quot;#9f99d1&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else if($1 ~ /^TARA_/) col=&quot;#86bada&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else if($1 ~ /^MALA_/) col=&quot;#dbaad7&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else if($1 ~ /^MARD_/ || $1 ~ /^GEM_/) col=&quot;#f6beb0&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else if($1 ~ /^BGEO_/) col=&quot;#ffe3b3&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else col=&quot;#7f7f7f&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  print $1&quot;\t&quot;col</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}&#x27; /data1/guanti/ppl_work/B2_expand/tree/leaf_ids.txt \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; /data1/guanti/ppl_work/B2_expand/itol_out/itol_source.txt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="从服务器上传到本地">从服务器上传到本地<a href="#从服务器上传到本地" class="hash-link" aria-label="Direct link to 从服务器上传到本地" title="Direct link to 从服务器上传到本地">​</a></h3>
<ol>
<li>在本地新建一个文件夹
我的文件夹是H盘的IQ-TREE（尽量不要使用空格）</li>
<li>使用scp指令传输</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">powershell</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">scp guanti@124.16.144.150:/data1/guanti/ppl_work/B2_expand/itol_out/itol_source.txt H:\IQ-TREE\</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="symbols-dataset_symbol">Symbols (DATASET_SYMBOL)<a href="#symbols-dataset_symbol" class="hash-link" aria-label="Direct link to Symbols (DATASET_SYMBOL)" title="Direct link to Symbols (DATASET_SYMBOL)">​</a></h2>
<p>一直看不到好奇怪</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-bar-dataset_simplebar">Simple bar (DATASET_SIMPLEBAR)<a href="#simple-bar-dataset_simplebar" class="hash-link" aria-label="Direct link to Simple bar (DATASET_SIMPLEBAR)" title="Direct link to Simple bar (DATASET_SIMPLEBAR)">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="gradient--heatmap-dataset_gradient">Gradient / Heatmap (DATASET_GRADIENT)<a href="#gradient--heatmap-dataset_gradient" class="hash-link" aria-label="Direct link to Gradient / Heatmap (DATASET_GRADIENT)" title="Direct link to Gradient / Heatmap (DATASET_GRADIENT)">​</a></h2>
<ol>
<li>nano</li>
<li>粘贴脚本</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">ssh</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/env python3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># -*- coding: utf-8 -*-</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">From a Newick tree:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- make a SimpleBar dataset of terminal branch lengths per leaf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- make a Gradient dataset of patristic distance from a seed leaf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">No external deps.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import argparse, os, re</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from collections import defaultdict, deque</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class Node:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __slots__ = (&quot;id&quot;,&quot;name&quot;,&quot;parent&quot;,&quot;children&quot;,&quot;len&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def __init__(self, nid):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.id = nid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.name = None          # leaf/internal label</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.parent = None        # parent id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.children = []        # child ids</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.len = 0.0            # edge length from parent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def parse_args():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ap = argparse.ArgumentParser()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ap.add_argument(&quot;--tree&quot;, required=True, help=&quot;IQ-TREE .treefile (Newick)&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ap.add_argument(&quot;--seed&quot;, required=True, help=&quot;seed leaf name (exact, e.g. ppl)&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ap.add_argument(&quot;--outdir&quot;, required=True, help=&quot;output directory for iTOL datasets&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return ap.parse_args()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def parse_newick_build_tree(nwk):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nodes = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    def new_node():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        n = Node(len(nodes))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        nodes.append(n)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return n</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    stack = []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    root = None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    i, n = 0, len(nwk)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    last = None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pending_internal = None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    while i &lt; n:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ch = nwk[i]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if ch in &#x27; \t\r\n&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            i += 1; continue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if ch == &#x27;(&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # new internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            inode = new_node()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if stack:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                inode.parent = stack[-1].id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                stack[-1].children.append(inode.id)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                root = inode</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            stack.append(inode)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            last = &#x27;(&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        elif ch == &#x27;)&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # finish current internal; may follow name:length</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            pending_internal = stack.pop()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            last = &#x27;)&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        elif ch == &#x27;,&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            last = &#x27;,&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        elif ch == &#x27;;&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            break</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # read label</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if ch in &quot;&#x27;\&quot;&quot;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                q = ch; i += 1; s = i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                while i &lt; n and nwk[i] != q: i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                label = nwk[s:i]; i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                s = i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                while i &lt; n and nwk[i] not in &#x27;():,;&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                label = nwk[s:i].strip()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            # read optional branch length</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            br = None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if i &lt; n and nwk[i] == &#x27;:&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                s = i</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                while i &lt; n and nwk[i] not in &#x27;,)&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    i += 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                brs = nwk[s:i]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                try: br = float(brs)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                except: br = 0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if last in (&#x27;(&#x27;, &#x27;,&#x27;):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                # this is a leaf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                leaf = new_node()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                leaf.name = label</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                leaf.len = br or 0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                if stack:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    leaf.parent = stack[-1].id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    stack[-1].children.append(leaf.id)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            elif last == &#x27;)&#x27;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                # label/length for the internal node we just closed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                if label: pending_internal.name = label</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                if br is not None: pending_internal.len = br</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            last = &#x27;label&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return nodes, root.id if root else 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def build_adj(nodes):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adj = defaultdict(list)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    for n in nodes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        if n.parent is not None:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            w = n.len or 0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            adj[n.id].append((n.parent, w))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            adj[n.parent].append((n.id, w))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return adj</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def distances_from(seed_id, adj):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    dist = {seed_id: 0.0}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    dq = deque([seed_id])</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    while dq:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        u = dq.popleft()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for v, w in adj.get(u, []):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            if v not in dist:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                dist[v] = dist[u] + (w or 0.0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                dq.append(v)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return dist</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def write_simplebar(path, label, pairs):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    with open(path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as w:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;DATASET_SIMPLEBAR\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;SEPARATOR\tTAB\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(f&quot;DATASET_LABEL\t{label}\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;COLOR\t#3182bd\n\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;DATA\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for leaf, val in pairs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            w.write(f&quot;{leaf}\t{val}\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def write_gradient(path, label, pairs):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    with open(path, &quot;w&quot;, encoding=&quot;utf-8&quot;) as w:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;DATASET_GRADIENT\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;SEPARATOR\tTAB\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(f&quot;DATASET_LABEL\t{label}\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        # 3-color梯度：蓝-白-红</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;COLOR_MIN\t#2c7bb6\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;COLOR_MID\t#ffffbf\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;COLOR_MAX\t#d7191c\n\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        w.write(&quot;DATA\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        for leaf, val in pairs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            w.write(f&quot;{leaf}\t{val}\n&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    args = parse_args()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    os.makedirs(args.outdir, exist_ok=True)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    with open(args.tree, &quot;r&quot;, encoding=&quot;utf-8&quot;) as f:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        nwk = f.read()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    nodes, root_id = parse_newick_build_tree(nwk)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # 叶子与末端分支长度</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    leaves = [n for n in nodes if (not n.children) and n.name]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    leaf_branch = {n.name: (n.len or 0.0) for n in leaves}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # 距离 seed 的谱系距离</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    seed_candidates = [n for n in leaves if n.name == args.seed] \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      or [n for n in leaves if n.name.lower() == args.seed.lower()]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if not seed_candidates:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        raise SystemExit(f&quot;[ERR] seed &#x27;{args.seed}&#x27; not found among {len(leaves)} leaves.&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    seed = seed_candidates[0]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    adj = build_adj(nodes)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    dist_all = distances_from(seed.id, adj)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    leaf_dist = [(n.name, dist_all.get(n.id, 0.0)) for n in leaves]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # 写 iTOL 文件</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    out1 = os.path.join(args.outdir, &quot;itol_branchlen_bar.txt&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    out2 = os.path.join(args.outdir, &quot;itol_seed_distance_gradient.txt&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write_simplebar(out1, &quot;TerminalBranchLen&quot;, sorted(leaf_branch.items()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    write_gradient(out2, f&quot;Dist_to_{args.seed}&quot;, sorted(leaf_dist))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&quot;[OK] Wrote:&quot;, out1, &quot;and&quot;, out2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    main()</span><br></span></code></pre></div></div>
<ol start="3">
<li>执行</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">ssh</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">python3 /data1/guanti/tools/tree_metrics_to_itol.py \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --tree   /data1/guanti/ppl_work/B2_expand/tree/ppl90_quick.treefile \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --seed   ppl \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  --outdir /data1/guanti/ppl_work/B2_expand/itol_out</span><br></span></code></pre></div></div>
<ol start="4">
<li>执行后会得到两个上传的文档</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">powershell</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">scp guanti@124.16.144.150:/data1/guanti/ppl_work/B2_expand/itol_out/itol_branchlen_bar H:\IQ-TREE\</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">scp guanti@124.16.144.150:/data1/guanti/ppl_work/B2_expand/itol_out/itol_seed_distance_gradient H:\IQ-TREE\</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤三">步骤三<a href="#步骤三" class="hash-link" aria-label="Direct link to 步骤三" title="Direct link to 步骤三">​</a></h3>
<ol>
<li>挑取大肠杆菌划线于无抗 LB 平板上，37℃ 恒温培养过夜（16-18h）</li>
<li>（也可以用液体培养基培养）将大肠杆菌（10μL）加入 LB 培养基中，37℃ 过夜</li>
</ol>
<br>
<div class="note"><p>步骤一只为得到活化的原始菌株，固体培养基和液体培养基复苏效果对后期感受态细胞的转化效率无明显差别</p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤二">步骤二<a href="#步骤二" class="hash-link" aria-label="Direct link to 步骤二" title="Direct link to 步骤二">​</a></h3>
<ol>
<li>挑单菌落于 50 mL 无抗 S.O.B. 培养基（或者 LB 培养基）中37℃ 200r/min 培养3-4h，至 OD<sub>600</sub> = 0.4，超过 0.6 不利于制作感受态细胞</li>
<li>（液体培养基的菌）菌：LB=1:100~1:300 ，37℃，110r 剧烈摇 1-3h</li>
</ol>
<br>
<div class="note"><p>步骤二主要为了获得OD=0.4的细胞</p></div>
<div class="note"><p>由于未明原因，在大肠杆菌的生长曲线上，有两个时期的大肠杆菌可以有较高的转化效率，一个在初期（ OD<sub>600</sub> = 0.4）( Hunahan 1983)，另一个在末期（ OD<sub>600</sub> = 0.95 ）( Tang et al, 1994)。前期收获的菌容易有效是因为它的高转化率能持续的时间更长，而后期的生长峰较陡峭，在收集细菌时若稍耽误 2~3 min，将会使转化效率降低一个数量级。</p></div>
<div class="note"><p>欲制作更高效的感受态细胞，可以选择用 18-25℃ 过夜摇菌，可以 20℃/23℃ 16h</p></div>
<div class="note"><p>S.O.B. 培养基制作感受态细胞的转化效率比 LB 高</p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤三-1">步骤三<a href="#步骤三-1" class="hash-link" aria-label="Direct link to 步骤三" title="Direct link to 步骤三">​</a></h3>
<ol>
<li>培养液（菌液）冰上预冷 15min</li>
<li>（无菌操作）取出摇好活化的菌，取 1~1.5mL 加入 Ep 管中，4℃，4100r，1-5min</li>
</ol>
<br>
<div class="note"><p>每个质粒要用 50μL 的感受态细胞；若菌体较少，此步骤可以重复一次</p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤四">步骤四<a href="#步骤四" class="hash-link" aria-label="Direct link to 步骤四" title="Direct link to 步骤四">​</a></h3>
<ol>
<li>用枪头吸出上层培养液，弃之，倒置 1 min，流尽培养液</li>
<li>加入（初始培养液<!-- -->:CaCl<sub>2</sub> = 50:3）预冷过的 4℃ 0.1 mol/L 的 CaCl<sub>2</sub> 重悬细胞沉淀，轻轻抽吸混匀，冰上放置 30-60min</li>
<li>4℃，4100r，1min</li>
<li>此步骤重复一遍</li>
</ol>
<br>
<div class="note"><p>或者用 0.1 mol/L 的 CaCl<sub>2</sub>-MgCl<sub>2</sub> 溶液，80 mmol/L 的 MgCl<sub>2</sub>，20mmol/L的 CaCl<sub>2</sub></p></div>
<div class="note"><p>在 Hanahan 的感受态制备中，此步骤用 TFB &amp; FSB 代替了 CaCl<sub>2</sub> 溶液，但是过于繁复，因此我们只用CaCl<sub>2</sub> 或者 CaCl<sub>2</sub>-MgCl<sub>2</sub></p></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤五">步骤五<a href="#步骤五" class="hash-link" aria-label="Direct link to 步骤五" title="Direct link to 步骤五">​</a></h3>
<ol>
<li>弃去上清，倒置1min。</li>
<li>每1.5mL EP 管中，加入100μL预冷 CaCl<sub>2</sub>溶液（或者TFB）和 50μL 50%甘油，用移液枪轻轻上下打匀。
（每 50mL 加 2.5mL CaCl<sub>2</sub>，1.25mL甘油）</li>
<li>100μL/管冰上放置 1.5 mL 离心管中，封口标记</li>
<li>液氮速冻</li>
<li>可直接用 或者 -80℃ 保存备用</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="注">注<a href="#注" class="hash-link" aria-label="Direct link to 注" title="Direct link to 注">​</a></h2>
<p>本 Protocol 根据 Douglas Hanahan 超级感受态制备方法 <sup>[1]</sup> 及改良方法 <sup>[2]</sup> 简化得到。</p>
<div class="note"><p>灭菌指高压蒸汽灭菌。其他溶液的配制均需要用高压蒸汽灭菌的 ddH<sub>2</sub>O（ Milli-Q 超纯水或相同等级），配置完成后用 0.22 的滤膜过滤。</p></div>
<div class="note"><p>感受态在 4℃ CaCl<sub>2</sub> 中保存 24-48h，在最初保存的 12-24h 内，转化效率会有所提高。
玻璃管会降低转化率10倍。配置溶液的水受到有机污染会降低转化效率。
10%甘油会使细菌沉淀附着力降低。液氮速冻可以提高转化效率约5倍。</p></div>
<div class="note"><p>本 Protocol 适用于 E. coli strain to be transformed (e.g., DH1, DH5, MM294, JM108/9, DH5α, DH10B, TOP10, or Mach1) (as frozen stock).
Hanahan’s procedure works well with strains of E. coli K-12 commonly used in molecular cloning, including DH1, DH5, MM294, JM108/9, DH5α, DH10B, TOP10, and Mach1. The procedure also works (although not quite as well) with BL3, a derivation of E. coli strain B. However, some other strains of E. coli do not work as well. Thus, wherever possible, use a strain with a track record of success.</p></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reference">Reference<a href="#reference" class="hash-link" aria-label="Direct link to Reference" title="Direct link to Reference">​</a></h2>
<p>[1]  Hanahan, D., Jessee, J. and Bloom, F.R., 1991. [4] Plasmid transformation of Escherichia coli and other bacteria. Methods in enzymology, 204, pp.63-113.</p>
<p>[2]  Green, M.R. and Sambrook, J., 2018. The Hanahan method for preparation and transformation of competent Escherichia coli: high-efficiency transformation. Cold Spring Harbor Protocols, 2018(3), pp.pdb-prot101188.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/lab-protocol/Basic Experiments/For protein/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">制备感受态细胞</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/lab-protocol/SSG/Intro/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Intro</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#color-strip-dataset_colorstrip" class="table-of-contents__link toc-highlight">Color strip (DATASET_COLORSTRIP)</a><ul><li><a href="#新建一个文件" class="table-of-contents__link toc-highlight">新建一个文件</a></li><li><a href="#从系统上批量抓取分组不同库来源序列并进行美化" class="table-of-contents__link toc-highlight">从系统上批量抓取分组不同库来源序列，并进行美化</a></li><li><a href="#从服务器上传到本地" class="table-of-contents__link toc-highlight">从服务器上传到本地</a></li></ul></li><li><a href="#symbols-dataset_symbol" class="table-of-contents__link toc-highlight">Symbols (DATASET_SYMBOL)</a></li><li><a href="#simple-bar-dataset_simplebar" class="table-of-contents__link toc-highlight">Simple bar (DATASET_SIMPLEBAR)</a></li><li><a href="#gradient--heatmap-dataset_gradient" class="table-of-contents__link toc-highlight">Gradient / Heatmap (DATASET_GRADIENT)</a><ul><li><a href="#步骤三" class="table-of-contents__link toc-highlight">步骤三</a></li><li><a href="#步骤二" class="table-of-contents__link toc-highlight">步骤二</a></li><li><a href="#步骤三-1" class="table-of-contents__link toc-highlight">步骤三</a></li><li><a href="#步骤四" class="table-of-contents__link toc-highlight">步骤四</a></li><li><a href="#步骤五" class="table-of-contents__link toc-highlight">步骤五</a></li></ul></li><li><a href="#注" class="table-of-contents__link toc-highlight">注</a></li><li><a href="#reference" class="table-of-contents__link toc-highlight">Reference</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"></div></footer></div>
</body>
</html>